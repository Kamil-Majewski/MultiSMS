@page
@model ChangePasswordModel
@{
    ViewData["Title"] = "Zmień hasło";
    ViewData["ActivePage"] = ManageNavPages.ChangePassword;
}

<partial name="_StatusMessage" for="StatusMessage" />
<div class="admin-password options-container">
    <div class="option-content">
        <form class="options-form" id="change-password-form" method="post" style="padding-top:30px;">
            <div asp-validation-summary="ModelOnly" class="text-danger model-alert-font" role="alert"></div>
            <div style="margin-bottom:20px;">
                <span class="form-subtitle">Zmień hasło</span>
                <div class="form-group" style="margin-top: 20px;">
                    <div class="row">
                        <div class="col">
                            <label asp-for="Input.OldPassword" class="form-label">Obecne hasło</label>
                            <div class="password-input-container">
                                <input asp-for="Input.OldPassword" class="form-input" id="AdminOldPassword" autocomplete="current-password" style="padding-right:30px;" aria-required="true" placeholder="Wprowadź hasło" required />
                                <img src="~/icons/closed-eye.png" class="input-icons" id="eye-icon-old" alt="Toggle Password Visibility">
                            </div>
                            <span asp-validation-for="Input.OldPassword" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label asp-for="Input.NewPassword" class="form-label">Nowe Hasło</label>
                            <div class="password-input-container">
                                <input asp-for="Input.NewPassword" id="AdminNewPassword" class="form-input" id="password-input" autocomplete="new-password" style="padding-right:30px;" aria-required="true" placeholder="Proszę podać nowe hasło" required maxlength="40" title="Hasło musi zawierać: jedną cyfrę, jeden znak specjalny oraz jedną dużą literę" />
                                <img src="~/icons/closed-eye.png" class="input-icons" id="eye-icon-new" alt="Toggle Password Visibility">
                            </div>
                            <span asp-validation-for="Input.NewPassword" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="justify-content-center d-flex" style="margin-top: 20px;">
                <button type="submit" class="violet-button" style="width:100%;">Zatwierdź zmianę hasła</button>
            </div>
        </form>
    </div>
</div>

<script>

    $("#toolbar").hide();
    $("#toolbar-user-settings").show();
    $(".active-tab").removeClass("active-tab");
    $("#password-tab").parent().toggleClass("active-tab");

    $(document).ready(function () {

        $(document).on('click', "#dismiss-alert-button", function () {
            CalculateHeaderWidthAndToolbarHeight();
        });

        var oldPasswordInput = document.getElementById('AdminOldPassword');
        var oldEyeIcon = document.getElementById('eye-icon-old');
        var newPasswordInput = document.getElementById('AdminNewPassword');
        var newEyeIcon = document.getElementById('eye-icon-new');

        $("#eye-icon-old").click(function () {
            togglePasswordVisibility(oldPasswordInput, oldEyeIcon);
        });

        $("#eye-icon-new").click(function () {
            togglePasswordVisibility(newPasswordInput, newEyeIcon);
        });

        showEyeIconOrResetPasswordField(oldPasswordInput, oldEyeIcon);

        showEyeIconOrResetPasswordField(newPasswordInput, newEyeIcon);

    });

    
</script>

